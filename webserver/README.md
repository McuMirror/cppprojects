[![Cypress](https://img.shields.io/badge/cypress-dashboard-brightgreen.svg)](https://dashboard.cypress.io/#/projects/hv532c/runs)
# server
CMS написана на Go с MySQL<sup>1</sup> в качестве базы данных. Динамичная, разделенная по модулям, удобная и, благодаря начальной загрузке, полностью адаптируемая для мобильных устройств и планшетов. Все в одном двоичном файле, нет необходимости устанавливать дополнительные веб-серверы. Собственные шаблоны Go с объектами сервера позволяют делать практически все, что нужно.

## Скриншоты
![](support/screenshots-v2.gif)

## Использование
```
Использование ./server:
  -debug
    режим отладки с игнорированием файлов журнала
  -dir string
    каталог виртуальных хостов
  -host string
    хост сервера (по умолчанию "0.0.0.0")
  -keepalive
    включить / отключить поддержку сервера
  -port int
    порт сервера (по умолчанию 8080)
```

## Структура хостов
```
hosts
├── localhost # Главный каталог хоста
├──── config # Каталог конфигурации
├────── .domains # Прикрепленные домены
├────── config.json # Файл конфигурации CMS
├────── mysql.json # Файл конфигурации MySQL
├──── htdocs # Публичные http файлы
├──── logs # Logs dir
├────── access.log # Доступ к файлу журнала
├────── error.log # Файл журнала ошибок
├──── template # Шаблоны движка
├────── 404.html # Шаблон для страницы 404
├────── blog-category.html # Шаблон для категории блога
├────── blog-post.html # Шаблон для сообщения в блоге
├────── blog.html # Шаблон для домашней страницы блога
├────── cached-block-1.html # Кэшированный блок 1
├────── cached-block-2.html # Кэшированный блок 2
├────── cached-block-3.html # Кэшированный блок 3
├────── cached-block-4.html # Кэшированный блок 4
├────── cached-block-5.html # Кэшированный блок 5
├────── email-new-order-admin.html # Шаблон электронного письма с новым заказом
├────── email-new-order-user.html # Шаблон электронного письма с новым заказом
├────── footer.html # Footer
├────── header.html # Header
├────── index.html # Шаблон для домашней страницы
├────── maintenance.html # Шаблон для страницы обслуживания
├────── page.html # Шаблон для любых других страниц
├────── robots.txt # Размещать файл robots.txt
├────── scripts.js # Файл скриптов темы
├────── shop-category.html # Шаблон для категории магазина
├────── shop-product.html # Шаблон для магазина продукта
├────── shop.html # Шаблон для домашней страницы магазина
├────── sidebar-left.html # Может быть включен в шаблоны
├────── sidebar-right.html # Может быть включен в шаблоны
├────── styles.css # Файл стилей темы
└──── tmp # Временный каталог для файлов сеанса
```
Неограниченное количество хостов. Переменные шаблона в [Wiki](./wiki/main.md) или [здесь](./wiki/system.md) и [здесь](./wiki/data.md).

<!-- <br>
Образ Docker: [https://hub.docker.com/r/vladimirok5959/fave](https://hub.docker.com/r/vladimirok5959/fave) -->

## Разработка
**В корневом каталоге**
* **make** - проверка, тестирование, сборка и запуск в режиме отладки локально
* **make build** - выпуск сборки для Linux, Mac OS X и Windows
* **make format** - отформатировать весь код с помощью утилиты gofmt
* **make update** - получить все зависимости и поместить в папку vendor
* **make docker-test** - создать образ и запустить его через порт 8080
* **make docker-img** - строить только образ докера
* **make docker-push** - собрать и отправить образ в docker hub
* **make migrate** - создать новый пустой файл миграции

**В поддержке**
* **make cy-dev** - тесты Cypress в браузере
* **make cy** - тесты Cypress в консоли
* **make ab** - стресс-тест http

## Дорожная карта
| Задача | Статус | Готово |
| :--- | :--- | :--- |
| Модуль текстовых страниц | готов к использованию | 100% |
| Модуль отображения событий | готов к использованию | 100% |
| Модуль сопряжения с разделяемыми библиотеками| в работе | 40%|
| Интерфейс шлюза| в работе | 30% |
| Модуль базы данных SQLITE | в работе | 20% |
| Модуль шлюза ScdMdx | готов к использованию | 100% |
| Файловый менеджер | готов к использованию | 100% |
| Генератор отчетов | в процессе | 25% |
| Файловый менеджер | готов к использованию | 100% |

## Используемые ресурсы
* [jQuery] (https://github.com/jquery/jquery) (лицензия MIT)
* [Автоматический размер] (https://github.com/jackmoore/autosize) (лицензия MIT)
* [Sortable] (https://github.com/SortableJS/Sortable) (лицензия MIT)
* [Bootstrap] (https://github.com/twbs/bootstrap) (лицензия MIT)
* [CodeMirror] (https://github.com/codemirror/codemirror) (лицензия MIT)
* [Pell WYSIWYG] (https://github.com/jaredreich/pell) (лицензия MIT)
* [Выбор начальной загрузки] (https://github.com/snapappointments/bootstrap-select/) (лицензия MIT)