{"version":3,"file":"urlcat.js","sources":["../../../../urlcat/dist/index.js"],"sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.join = exports.subst = exports.query = void 0;\r\nfunction urlcat(baseUrlOrTemplate, pathTemplateOrParams, maybeParams) {\r\n    if (maybeParams === void 0) { maybeParams = {}; }\r\n    if (typeof pathTemplateOrParams === 'string') {\r\n        var baseUrl = baseUrlOrTemplate;\r\n        var pathTemplate = pathTemplateOrParams;\r\n        var params = maybeParams;\r\n        return urlcatImpl(pathTemplate, params, baseUrl);\r\n    }\r\n    else {\r\n        var baseTemplate = baseUrlOrTemplate;\r\n        var params = pathTemplateOrParams;\r\n        return urlcatImpl(baseTemplate, params);\r\n    }\r\n}\r\nexports.default = urlcat;\r\nfunction urlcatImpl(pathTemplate, params, baseUrl) {\r\n    var _a = path(pathTemplate, params), renderedPath = _a.renderedPath, remainingParams = _a.remainingParams;\r\n    var cleanParams = removeNullOrUndef(remainingParams);\r\n    var renderedQuery = query(cleanParams);\r\n    var pathAndQuery = join(renderedPath, '?', renderedQuery);\r\n    return baseUrl\r\n        ? join(baseUrl, '/', pathAndQuery)\r\n        : pathAndQuery;\r\n}\r\n/**\r\n * Creates a query string from the specified object.\r\n *\r\n * @param {Object} params an object to convert into a query string.\r\n *\r\n * @returns {String} Query string.\r\n *\r\n * @example\r\n * ```ts\r\n * query({ id: 42, search: 'foo' })\r\n * // -> 'id=42&search=foo'\r\n * ```\r\n */\r\nfunction query(params) {\r\n    return new URLSearchParams(params).toString();\r\n}\r\nexports.query = query;\r\n/**\r\n * Substitutes :params in a template with property values of an object.\r\n *\r\n * @param {String} template a string that contains :params.\r\n * @param {Object} params an object with keys that correspond to the params in the template.\r\n *\r\n * @returns {String} Rendered path after substitution.\r\n *\r\n * @example\r\n * ```ts\r\n * subst('/users/:id/posts/:postId', { id: 42, postId: 36 })\r\n * // -> '/users/42/posts/36'\r\n * ```\r\n */\r\nfunction subst(template, params) {\r\n    var renderedPath = path(template, params).renderedPath;\r\n    return renderedPath;\r\n}\r\nexports.subst = subst;\r\nfunction path(template, params) {\r\n    var remainingParams = __assign({}, params);\r\n    var allowedTypes = [\"boolean\", \"string\", \"number\"];\r\n    var renderedPath = template.replace(/:\\w+/g, function (p) {\r\n        var key = p.slice(1);\r\n        if (/^\\d+$/.test(key)) {\r\n            return p;\r\n        }\r\n        if (!params.hasOwnProperty(key)) {\r\n            throw new Error(\"Missing value for path parameter \" + key + \".\");\r\n        }\r\n        if (!allowedTypes.includes(typeof params[key])) {\r\n            throw new TypeError(\"Path parameter \" + key + \" cannot be of type \" + typeof params[key] + \". \" +\r\n                (\"Allowed types are: \" + allowedTypes.join(', ') + \".\"));\r\n        }\r\n        if (typeof params[key] === \"string\" && params[key].trim() === '') {\r\n            throw new Error(\"Path parameter \" + key + \" cannot be an empty string.\");\r\n        }\r\n        delete remainingParams[key];\r\n        return encodeURIComponent(params[key]);\r\n    });\r\n    return { renderedPath: renderedPath, remainingParams: remainingParams };\r\n}\r\n/**\r\n * Joins two strings using a separator.\r\n * If the separator occurs at the concatenation boundary in either of the strings, it is removed.\r\n * This prevents accidental duplication of the separator.\r\n *\r\n * @param {String} part1 First string.\r\n * @param {String} separator Separator used for joining.\r\n * @param {String} part2 Second string.\r\n *\r\n * @returns {String} Joined string.\r\n *\r\n * @example\r\n * ```ts\r\n * join('first/', '/', '/second')\r\n * // -> 'first/second'\r\n * ```\r\n */\r\nfunction join(part1, separator, part2) {\r\n    var p1 = part1.endsWith(separator)\r\n        ? part1.slice(0, -separator.length)\r\n        : part1;\r\n    var p2 = part2.startsWith(separator)\r\n        ? part2.slice(separator.length)\r\n        : part2;\r\n    return p1 === '' || p2 === ''\r\n        ? p1 + p2\r\n        : p1 + separator + p2;\r\n}\r\nexports.join = join;\r\nfunction removeNullOrUndef(params) {\r\n    return Object.keys(params)\r\n        .filter(function (k) { return notNullOrUndefined(params[k]); })\r\n        .reduce(function (result, k) {\r\n        result[k] = params[k];\r\n        return result;\r\n    }, {});\r\n}\r\nfunction notNullOrUndefined(v) {\r\n    return v !== undefined && v !== null;\r\n}\r\n"],"names":["this"],"mappings":"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"}